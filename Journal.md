### 12月2日之前
决定将考试系统作为结课设计。这一项目的灵感来源于学校众多学生组织举办的各类竞赛（百科知识竞赛、人文知识竞赛等等），这些竞赛的考试形式类似（100道左右的选择题，很少有填空），如果能创作一个通用、开源且免费的考试系统，将给这些学生组织带来很大的便利。

确定了基本的技术路线：
- 包含教师端和学生端两部分，不使用服务器，教师端作为本地服务器；
- JDBC + SQLite 管理数据库，包含考试信息和学生信息；
- 多线程：教师端为每个在线学生创建一个线程；
- Socket + BIO 实现网络通信； (后改为 Netty)
- JavaFX 实现界面。

### 12月2日
设计了教师端和学生端的基本架构，初步设计了服务之间的连接和状态的存储，创建了文件目录，添加了README，并创建了 Git 仓库。在pom.xml中添加了可能会用到的Java包的依赖。

### 12月3日
考虑到Socket + BIO的性能问题，可能不足以支持上百的学生，决定改为使用Netty + NIO实现。
将工作计划分为 公共内核阶段 + 独立开发阶段，并让AI为我们设计了构建计划。
初步搭建公共内核。

### 12月10日
由于准备竞赛/考试复习压力，项目略有搁置。上一周我们学习了 Git 的一些进阶使用，如冲突解决、合并等操作，今天继续。
创建了教师端的数据库层，DataManager用于创建数据库，并实现了DAO层，使业务层能够直接通过DAO调用，避免写SQL语句。

### 12月11日
我们今天一同创建了Teacher Server和Student Client的启动类。遇到一个小bug, 在学生端关闭、连接断开时重连函数还是会被调用，通过增加 isShutdown 标记解决了这个问题。

### 12月15日
今天发现，在教师端断线重连后，显示学生的端口会改变，询问AI后了解到原因，虽然不是很明白，但是得到的启示是，后面在搭建服务端时，不要将网络端口作为客户端的身份标识，而是要用学号来作为唯一ID.
创建了教师端的 JavaFX MVC 骨架。

### 12月16日
继续搭建学生端的JavaFX骨架，完成；
今天尝试实现教师端和学生端的握手。想到一些后面优化时可能会用到的：
- 学生端登录增加密码；
- 学号和姓名的规范化输入，以及姓名也要存储。

在十一点完成了握手的实现，一开始有一个bug，就是当两个学生输入重复学号时，会检测到重复id而对后一个学生拒绝连接，然而，后一个学生被拒之后会不断触发重连。这本来可以通过增加一个`reconnectDisabled`标记来实现，交给AI去做，却写了一个`disconnect()`方法，而且这个方法触发了新的bug: 将`isShutdown`设置为true, 导致在关闭窗口时，该学生线程没有被正确关闭（恼）。我们在图书馆修到闭馆，Wby回宿舍又改回`reconnectDisabled`标记的这个方法，才结束了今天的任务（累）。

对 AI 使用的一些思考：当交给AI的任务较小时，它会故意加大工作量，造成一些不必要的麻烦，由此产生了一个著名的提示词：“请做最小改动，实现上述任务。”

### 12月18日
今天完成了三个内容：教师端的在线学生表格界面、学生端的等待大厅界面以及教师和学生的心跳机制。JavaFX感觉上比html难用很多，以及maven用起来也相对困难，总要莫名其妙地clean+install才能好用（实际上代码没有任何bug，但是做了一些更改后必须要重复这个操作）。
学生端的等待大厅那次提交，又出现了不断触发重连的bug，使Netty和JavaFX线程冲突导致的，这次还是AI帮我们修复好的。
和网络相关的开发好难呀qwq

### 12月20日
今天简单增加了数据库操作的UI，即对考试以及某一场考试的题目的增删改查，逻辑比较简单，没有遇到太多问题。

### 12月21日
实现了教师端的试卷分发以及学生端的答题卡动态UI显示，遇到一个bug，判断题和填空题的`options`是null, controller生成选项时，读到null会报错。从两个地方进行修复，一是在handler里面对得到的DTO进行清洗，添加选项为空列表，二是在controller里面对null和empty的情况进行特判，解决了这一问题。

要注意的是，现在对判断题将选项增加为T和F，在后续保存答案时可能会有小问题，还要谨慎一些。

### 12月22日
目前发现一些问题，后续有待改进
TODO:
- 教师端创建考试时，如果某项信息没填，点击“保存”会直接报错，但是UI没有提示，应该增加提示；以及可以将考试信息存到内存中，防止意外丢失
- 创建好一个新考试之后，UI不会立即更新，只有退出重进之后才会更新，要么增加提示，要么增加刷新功能

今天增加了学生端的本地答案缓存
对教师端UI做了一些调整
实现了学生端提交答案和教师端接收答案

现在UI层还有一些bug: 考试结束后仪表盘尚未更新；提交后仪表盘未更新……
UI还是太麻烦了qwq

### 12月24日
优化了22日发现的教师端UI的两个bug, 随后又实现了学生提交答案写入数据库。实现这个之前又修改了登录逻辑，登陆时将学生信息写入数据库。再下一步任务就是关键的根据预设答案批改的功能了。

### 12月29日
今天测试两台电脑连接，而不是本地，记录一下踩坑。首先教师端Windows公网防火墙是必须要关的，其次就是校园网似乎禁止了ping请求，导致测试了很长时间，后来换用手机热点，立刻就好了（恼

对于新功能的开发，首先实现了自动批改功能，根据预设答案进行评分；又实现了成绩的显示和导出功能。这两部分主要是数据库的CRUD，代码量大一些，相较于网络相关功能的开发，问题不是很多。
至此，主体已经完成，剩余一些优化功能的开发。

TODO:
教师端自主选择端口
考试中，教师端广播题目更正
批改时进行答案更正
学生端答案临时保存以用于断线重连（灾备）
